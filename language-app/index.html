<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neo Language Learning - Practice Conversations</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/6.11.3/css/flag-icons.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-spacer"></div>
            <h1 class="page-title">Neo Language Learning</h1>
            <div class="settings-dropdown">
                <button id="settings-button" onclick="toggleSettings()">
                    <i class="fas fa-cog"></i>
                </button>
                <div id="settings-menu" class="settings-content">
                    <div class="settings-item">
                        <label for="preload-toggle">Preload conversations</label>
                        <label class="switch">
                            <input type="checkbox" id="preload-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="input-section">
            <div class="row">
                <div class="language-selection">
                    <div class="language-group">
                        <label for="native-language">I speak</label>
                        <select id="native-language">
                            <option value="auto"><i class="fas fa-globe"></i> Auto-detect</option>
                        </select>
                    </div>
                    <div class="language-group">
                        <label for="target-language">and I want to learn</label>
                        <select id="target-language">
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="language-item">
                    <label for="speaker-gender" class="tooltip-label">
                        I am
                        <span class="tooltip-icon" data-tooltip="Some languages use different expressions and word forms based on the speaker's gender">ⓘ</span>
                    </label>
                    <select id="speaker-gender" onchange="saveGenderPreference()">
                        <option value="neutral">Not specified</option>
                        <option value="male">♂ Male</option>
                        <option value="female">♀ Female</option>
                    </select>
                </div>
                <div class="style-selector">
                    <label>Conversation style:</label>
                    <div class="style-options">
                        <button id="casual-style" class="style-button">Casual</button>
                        <button id="formal-style" class="style-button">Formal</button>
                    </div>
                </div>
            </div>

            <input type="text" id="input-text" placeholder="Enter something you'd like to talk about or leave empty for a random topic...">
            
            <div class="button-container">
                <button id="generate-button" onclick="handleGenerate()">Generate Conversation</button>
            </div>
        </div>

        <div class="conversation-container">
            <div id="conversation-topic" class="conversation-topic"></div>
            <div id="conversation-content"></div>
        </div>

        <div id="debug-console"></div>
        <div id="debug-controls">
            <button onclick="clearDebugConsole()">Clear Console</button>
            <button onclick="copyDebugConsole()">Copy Console</button>
            <button onclick="toggleDebugConsole()">Toggle Console</button>
        </div>

        <div id="apiKeyModal" class="modal">
            <div class="modal-content">
                <h2>OpenAI API Key Required</h2>
                <p>Please enter your OpenAI API key to use the application. The key will be stored securely in your browser.</p>
                <input type="password" id="apiKeyInput" class="api-key-input" placeholder="Enter your OpenAI API key">
                <div class="modal-buttons">
                    <button onclick="closeApiKeyModal()" class="cancel-button">Cancel</button>
                    <button onclick="saveApiKey()">Save Key</button>
                </div>
            </div>
        </div>

    <!-- Scripts -->
    <script src="script.js"></script>
</body>
</html>
